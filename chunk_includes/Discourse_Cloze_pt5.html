<style media="screen" type="text/css"> 
div { 
   width: 60em; 
   font-size:large; 
   padding-left: 1em;
   padding-right: 1em;
   padding-bottom: 1em;
   margin-top: 3em;
   }
   
h3 {
   font-size: large; 
   margin-top:1em;
   margin-bottom: 3em;
   text-align: center;
   }
   
p { 
   font-size: 25;
   text-align: justify;  
   }
  
body {
    color: white;
    background-color: black;
    margin-left: .5em;
    margin-right: .5em;
    margin-top: 3em;
    font-size: 15pt;
}

   
</style>


<html>
<body>
  
<div style="margin: 0 auto; text-align: left; border:1px solid white; background-color:black">

<form id="inputarea" onSubmit="return false;">
  <h2>Reading and guessing game:</h2><br>
  <p id="demo"></p>
  <br>
  <input  id="guess" type="text" name="guess" value="" autocomplete="off" spellcheck="value" onkeydown="validateGuess(event)">
  <br>
  <p id="CountLine">Number of correct guesses: 0</p>
  <br>
  
  <form id="ClozeData">
    <input id="username" type="hidden" name="username" value="">
    <input id="userdate" type="hidden" name="userdate" value="">
    <input id="datatosend" type="hidden" name="datatosend">
  </form>
  
</form> 
  
</div>

<script>
  


var Story = " \"Megan, do you know whose hairs these are\?\" &rarr; ]_\"They_could_be_from_anywhere!\" &rarr; ]_\"But_they_aren't_from_anywhere. These hairs prove you were at the_scene_of_the_crime!\"  &rarr; ]_Megan looked at me. &rarr; ]_\"What are you even talking about\?\" &rarr; ]_\"You were in the library when you_weren't_supposed_to_be.\" &rarr; ]_Megan's face looked panicky. \"No, I wasn't.\" &rarr; ]_\"The matching hairs prove it!\" I said triumphantly. &rarr; ]_\"One hair is from your sweater, and the_other_came_from_the_library carpet. And they're both_from_Howard_the_hamster!\" &rarr; ]_Javier's mouth fell open. \"Wow. That's amazing.\" &rarr; ]_Megan blew a puff of air out of her cheeks. &rarr; ]_\"Okay, fine. I snuck into the library during lunch because I knew Mr. Hornswoggle wasn't in there to catch me. Are you happy now\?\" &rarr; ]_I crossed my arms. &rarr; ]_\"I am very happy, thank you very much. Now hand over Coco.\" &rarr; ]_Megan_glared_at_me. &rarr; ]_\"Again, what are you talking about\?\" &rarr; ]_\"You just said that you_snuck_into_the_library_to steal Coco!\" Alex said. &rarr; ]_\"No, I did not. I snuck into the library to play with Howard.\" Megan sighed and looked around like she was about_to_get_into_big_trouble if anyone overheard. &rarr; ]_\"My parents don't let me have any pets. So once in a while I like to play with that silly hamster. Okay\? You win.\" &rarr; ]_Only I didn't win anything at all._Not_with_Coco_still turtled\-napped. &rarr; ]_\"Was Coco still in his aquarium when you were there during lunch\?\" Alex asked. &rarr; ]_\"Yes. He was lying on that rock like he was a rock himself. Honestly, what do you people see in that thing\?\" &rarr; ]_She turned_and_stalked_off_in_a huff. &rarr; ]_And just like that, one suspect was down already, and we were no closer_to_solving_the_mystery_of the turtle snatcher. &rarr; ]_The next morning, Mr. Hornswoggle came to room 113 just as we were moving over to the learning rug_to_play_the_Favorite_Things game. &rarr; ]_\"May I speak with_Tully_for_a_moment\?\" Mr. Hornswoggle asked Miss Flores. &rarr; ]_I_quickly_whispered_the_situation_in Miss Flores' ear. &rarr; ]_She gave the Gumshoe Gang a hall pass. &rarr; ]_\"Make it quick!\" &rarr; ]_We stepped out into_the_hall_with_Mr. Hornswoggle. &rarr; ]_I told him all about yesterday. &rarr; ]_\"Oh, dear,\" he said. &rarr; ]_\"This is distressing.\" &rarr; ]_\"We're_going_to_get_Coco back,\" I said. &rarr; ]_\"We're on the case, sir,\" said Alex. &rarr; ]_Mr. Hornswoggle pulled a handkerchief out of his pocket and patted his forehead. &rarr; ]_\"I very much hope so. You see, Coco is gravid, and so we must_make_sure_the_turtle_returns to the nest in time.\" &rarr; ]_I had no idea what he was talking about. &rarr; ]_Lyra and I raised our eyebrows at each other. \"Huh\?\" &rarr; ]_\"Coco is pregnant.\" &rarr; ]_\"What\?\" I nearly shouted. \"But Coco is a boy!\" &rarr; ]_Mr. Hornswoggle shrugged his shoulders. &rarr; ]_\"Everyone says 'he' and so I don't correct them, but he is very much a she.\" &rarr; ]_\"But, but, who\-\" Lyra sputtered, covering her mouth with her hands. &rarr; ]_Then she whispered, \"Who is Coco's husband\?\" &rarr; ]_Mr. Hornswoggle chuckled. &rarr; ]_\"It is a strange fact about turtles, but some females_can_lay_a_clutch_of eggs years after mating. Coco used to have a mate, but he passed away quite a while ago.\" &rarr; ]_\"Holy moly\" Lyra said. &rarr; ]_\"Wow, Mr. Hornswoggle!\" Caleb said. \"You_are_like_an_empty_well of knowledge!\" &rarr; ]_\"He means that as a compliment,\" said Alex. &rarr; ]_I pulled_my_notebook_out_of_my back pocket. &rarr; ]_\"Mr. Hornswoggle, do you have any idea who would want to snatch a turtle\?\" &rarr; ]_\"Eh. Well. Hmm.\" Mr._Hornswoggle_took_off_his_glasses and started polishing them with his vest. &rarr; ]_\"Coco is a Cagle's Map turtle, which is pretty rare. They are only found in a certain river in Texas. And she is a very beautiful turtle_with_all_those_green_circles and spirals on her carapace.\" &rarr; ]_\"That means shell,\" I said proudly. &rarr; ]_\"Would someone want Coco because she's rare\?\" &rarr; ]_Mr. Hornswoggle nodded. &rarr; ]_\"Possibly. An adult Cagle's Map turtle could easily sell for more than two hundred dollars, depending on the market. Hatchlings could go for well over one hundred dollars each.\" &rarr; ]_Wow. That was a lot of cold, hard cash. I could probably buy a whole pony with_that_kind_of_money. &rarr; ]_To continue, press 'Esc'. &rarr;"
    
var StorySplit = Story.match( /[^\]]+/g );

var SentenceNumber = [];
  
for (i = 0; i < StorySplit.length; i++) { 
    SentenceNumber[i] = i+1;
}
  
var x=0;

var str = StorySplit[x];

var words = str.split("_");
  
var fullsent = words[0];

var i = 0;
var corCount = 0;
var guessWord = "";
var correctWord = "";
var acc = 0;

document.getElementById("demo").innerHTML = fullsent;

if(fullsent==""){
var filler = "."
filler = filler.fontcolor("black");
document.getElementById("demo").innerHTML = filler;
}

document.getElementById("guess").focus();

</script>

</body>
</html>

<script>

var start = Date.now()
var end = 0
var RT = 0
var sent = SentenceNumber[x];
  
 
function validateGuess(e){ 
    
 const regex = RegExp('&rarr;');
 var arrow_check = regex.test(fullsent); 
  
 var keycode = (e.keycode ? e.keyCode : e.which); 
  
  if (regex.test(fullsent)) {
  
    if (keycode == "39") {
      
      handleEnter(event);
      
    } else if (keycode == "13") { 
      
      alert("You are reading right now, no need to guess!");
      document.getElementById("guess").value = "";

            
    }
    
  } else if (keycode == "39") {
    
    alert("You must make a guess here!"); 
    
  } else if (keycode == "13") { 
      
      var x = document.getElementById("guess").value
   
      if (x == "" | x == " " | x == "  " | x == "   ") { 
       
       alert("You must make an actual guess!"); 
       document.getElementById("guess").value = "";

       
      } else { 
       
      handleEnter(event); } 
  }
}
  
  
function handleEnter(e){
    var keycode = (e.keyCode ? e.keyCode : e.which);
    
    i=i+1;
    RT = performance.now() - start;
    start = performance.now();

    if (i == words.length) {
    x++;

    str = StorySplit[x];
    words = str.split("_");
    i=1;
    fullsent = "";
    sent = SentenceNumber[x];
    }


    correctWord = words[i].toLowerCase();
    guessWord = (document.getElementById("guess").value).toLowerCase();
  
    correctWord = correctWord.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"");
    guessWord = guessWord.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"");

    correctWord = correctWord.trim();  
    guessWord = guessWord.trim();

    if (correctWord === guessWord) {
          corCount = corCount + 1;
      acc = 1;
    } else {
          acc = 0;
    }  

    document.getElementById("demo").innerHTML = fullsent + " " + words[i];
    document.getElementById("guess").value = "";
    document.getElementById("CountLine").innerHTML = "Number of correct guesses: " + corCount;

    document.getElementById("guess").focus();

    fullsent = fullsent + " " + words[i]
    
    document.getElementById("datatosend").value = document.getElementById("datatosend").value+sent+","+correctWord+","+guessWord+","+acc+","+RT+ ",";
    
    
}
</script>


